
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Partner Registration | OneCall</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:Poppins}
body{margin:0;background:#f4f6f8}
.container{
  max-width:520px;
  background:#fff;
  margin:30px auto;
  padding:25px;
  border-radius:10px;
  box-shadow:0 10px 25px rgba(0,0,0,.1)
}
h2{text-align:center}
label{display:block;margin-top:12px;font-weight:500}
input{width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:6px}
.checkbox-group label{font-weight:400}
button{
  margin-top:20px;
  width:100%;
  padding:14px;
  background:#0a7cff;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:16px
}
.success{
  display:none;
  color:green;
  text-align:center;
  margin-top:15px;
  font-weight:600
}
</style>
</head>

<body>

<div class="container">
<h2>Partner Registration</h2>

<form id="partnerForm">

<label>Full Name</label>
<input id="name" required>

<label>Mobile Number</label>
<input id="mobile" required>

<label>City</label>
<input id="city" required>

<label>Services (multiple)</label>
<div class="checkbox-group">
<label><input type="checkbox" value="Electrician"> Electrician</label>
<label><input type="checkbox" value="Plumber"> Plumber</label>
<label><input type="checkbox" value="Tile Work"> Tile Work</label>
<label><input type="checkbox" value="Civil Work"> Civil Work</label>
<label><input type="checkbox" value="Painting"> Painting</label>
</div>

<label>Upload Photo</label>
<input type="file" id="photo" accept="image/*" required>

<label>Upload Aadhaar / ID</label>
<input type="file" id="aadhaar" accept="image/*,application/pdf" required>

<button type="submit">Submit</button>
</form>

<div class="success" id="successMsg">
âœ… Registration successful
</div>
</div>

<!-- ðŸ”¥ FIREBASE (SAFE VERSION â€“ NO MODULE) -->
<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/12.7.0/firebase-storage-compat.js"></script>

<script>
alert("JS LOADED"); // proof JS chal rahi

const firebaseConfig = {
  apiKey: "AIzaSyCBWFoSbByYhp4iElmo01KB1NEBgaCWCbk",
  authDomain: "onecall-partner-registration.firebaseapp.com",
  projectId: "onecall-partner-registration",
  storageBucket: "onecall-partner-registration.appspot.com",
  messagingSenderId: "158745534242",
  appId: "1:158745534242:web:6ae3edc6be64e2f4634f7b"
};

firebase.initializeApp(firebaseConfig);

const db = firebase.firestore();
const storage = firebase.storage();

document.getElementById("partnerForm").addEventListener("submit", function(e){
  e.preventDefault();
  alert("SUBMIT CLICKED");

  const name = document.getElementById("name").value;
  const mobile = document.getElementById("mobile").value;
  const city = document.getElementById("city").value;

  const services = [...document.querySelectorAll(".checkbox-group input:checked")].map(i=>i.value);

  const photoFile = document.getElementById("photo").files[0];
  const aadhaarFile = document.getElementById("aadhaar").files[0];

  const photoRef = storage.ref("photos/"+Date.now()+"_"+photoFile.name);
  const aadhaarRef = storage.ref("aadhaar/"+Date.now()+"_"+aadhaarFile.name);

  photoRef.put(photoFile)
    .then(()=>aadhaarRef.put(aadhaarFile))
    .then(()=>Promise.all([photoRef.getDownloadURL(), aadhaarRef.getDownloadURL()]))
    .then(urls=>{
      return db.collection("partners").add({
        name, mobile, city,
        services,
        photoURL: urls[0],
        aadhaarURL: urls[1],
        createdAt: new Date()
      });
    })
    .then(()=>{
      alert("DATA SAVED");
      document.getElementById("successMsg").style.display="block";
      e.target.reset();
    })
    .catch(err=>{
      alert("ERROR: "+err.message);
      console.error(err);
    });
});
</script>

</body>
</html>







